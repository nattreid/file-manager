;(function(b,a){if(a.jQuery===undefined){console.error('Plugin "jQuery" required by "fileManager.js" is missing!');return}a.FileManager={};a.FileManager.viewer;a.FileManager.container;a.FileManager.loaded;a.FileManager.redrawViewer=function(){this.loaded=false;this.viewer=b(".fileManagerContainer .viewer");this.container=this.viewer.find(".viewer-container");this.viewer.css({visibility:"hidden",display:"block"});this.resize();this.viewer.css({visibility:"",display:"none"});this.viewer.fadeIn()};a.FileManager.resize=function(){if(this.container){if(this.container.hasClass("image")){var c=this.container.find("img");function d(){var f=30;c.removeAttr("style");var h=c.width();var e=c.height();var g=a.innerWidth-f;var i=a.innerHeight-f;if(h>g){e=e/(h/g);h=g}if(e>i){h=h/(e/i);e=i}c.width(h);c.height(e);a.FileManager.container.centerFixed()}if(this.loaded){d()}else{c.load(function(){a.FileManager.loaded=true;d()})}}else{this.container.centerFixed()}}};b(document).ready(function(){var e=null;var f=null;var c={left:0,top:0};function d(){if(e!==null){e.abort()}if(f!==null){clearTimeout(f)}}b(document).on("mousemove",".no-touchevents .fileManagerContainer .fileManagerContent .itemContainer a.item",function(g){c=b(this).closest(".itemContainer").find(".properties").onPosition(g)});b(document).ajaxStart(function(){d()});b(document).on("mouseenter",".no-touchevents .fileManagerContainer .fileManagerContent .itemContainer a.item",function(){var g=b(this).closest(".itemContainer");f=setTimeout(function(){if(g.data("request")===0){g.data("request",1);e=b.nette.ajax(g.data("file-size-handler")).success(function(){g.find(".properties").show().css({left:c.left,top:c.top});g.data("request",2)}).complete(function(){if(g.data("request")!==2){g.data("request",0)}e=null});f=null}},2000);g.find(".properties").show()});b(document).on("mouseleave",".no-touchevents .fileManagerContainer .fileManagerContent .itemContainer a.item",function(){d();b(this).closest(".itemContainer").find(".properties").hide()});b(document).on("click",".fileManagerContainer .fileManagerContent .itemContainer a.item",function(g){d();return false});b(document).on("contextmenu",".no-touchevents .fileManagerContainer .fileManagerContent .itemContainer",function(g){d();b(this).find(".properties").hide();b(this).find(".fileContextMenu").hide();var h=b(this).find(".fileContextMenu");h.onPosition(g,-30,-30);h.show();return false});b(document).on("contextmenu",".touchevents .fileManagerContainer .fileManagerContent .itemContainer",function(g){b(this).closest(".fileManagerContent").find(".fileContextMenu").hide();var h=b(this).find(".fileContextMenu");h.onPosition(g,-30,-30);h.show();h.clickOut(function(i){i.hide();return true});return false});b(document).on("mouseleave",".no-touchevents .fileManagerContainer .fileManagerContent .itemContainer .fileContextMenu",function(){b(this).hide()});b(document).on("click",".fileManagerContainer .viewer .background, .fileManagerContainer .viewer .viewerClose",function(){b(this).closest(".viewer").fadeOut()});b(document).on("change",'.fileManagerContainer .viewer .data input[type="checkbox"]',function(g){var h=b(this).closest(".data").find("pre, textarea");if(b(this).is(":checked")){h.removeClass("notAlign")}else{h.addClass("notAlign")}});b(a).on("resize.fileManager",function(){a.FileManager.resize()})})})(jQuery,window);